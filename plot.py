import numpy as np
import matplotlib.pyplot as plt

# 2783  92.76666666
# 백도어 2933  97.76666666

# 8776
# 9753

# normal_stl = [0.054238636, 0.06084959, 0.0608821, 0.061723143, 0.06334086, 0.062873304, 0.06134902, 0.058869686, 0.056565266, 0.052799057, 0.048615925, 0.043780874, 0.03848644, 0.032157023, 0.024217285, 0.016136637, 0.009780834, 0.0055329143, 0.0, 0.0056589064, 0.010086331, 0.016798053, 0.02468181, 0.032679647, 0.040165685, 0.044892907, 0.049947694, 0.053833954, 0.057481162, 0.060607564, 0.062545955, 0.06396148, 0.06412408, 0.06338968, 0.062260162, 0.06225818, 0.056205858]
# adver_stl = [0.14494002, 0.14103158, 0.14057884, 0.14075455, 0.13976039, 0.14069596, 0.14111193, 0.13824971, 0.14118363, 0.14118992, 0.1419851, 0.1408816, 0.13765761, 0.13850527, 0.14226088, 0.14057761, 0.1420089, 0.14210653, 0.14512451, 0.14098231, 0.13908279, 0.1398295, 0.13844194, 0.13914812, 0.139323, 0.13648534, 0.13890871, 0.14040017, 0.1405551, 0.14116204, 0.13885257, 0.13923778, 0.14086208, 0.13961494, 0.14224443, 0.1408148, 0.14498161]

DATASET = 'cifar'
DATASET = 'stl'

cifar_normal = [0.075067595, 0.08409621, 0.08504073, 0.08372931, 0.08292214, 0.08207258, 0.08069237, 0.07808337, 0.07509579, 0.069734044, 0.06622933, 0.0601174, 0.052594624, 0.043459155, 0.03215405, 0.022222579, 0.015103285, 0.011090807, 0.0, 0.011114389, 0.015815368, 0.02208732, 0.032188326, 0.04288232, 0.052069105, 0.059365857, 0.06549814, 0.069519974, 0.07450429, 0.07733222, 0.079749, 0.08220739, 0.08377738, 0.08403432, 0.085251, 0.08449491, 0.07454337]
cifar_backdoor = [0.003042312, 0.017733628, 0.038516507, 0.067944035, 0.08271354, 0.08155509, 0.08472431, 0.07304198, 0.074894406, 0.07789116, 0.06974536, 0.060504653, 0.06690636, 0.072107926, 0.06902977, 0.056096528, 0.039114133, 0.013406029, 0.0, 0.012268853, 0.04066922, 0.06685757, 0.0787984, 0.08026701, 0.08504555, 0.06957546, 0.075203896, 0.07648588, 0.06738396, 0.057950407, 0.06412797, 0.06559539, 0.06529819, 0.060256865, 0.044937853, 0.019021092, 0.0025605143]

stl_normal =[0.054238636, 0.06084959, 0.0608821, 0.061723143, 0.06334086, 0.062873304, 0.06134902, 0.058869686, 0.056565266, 0.052799057, 0.048615925, 0.043780874, 0.03848644, 0.032157023, 0.024217285, 0.016136637, 0.009780835, 0.0055329143, 0.0, 0.005658905, 0.010086331, 0.01679805, 0.024681808, 0.032679647, 0.04016568, 0.044892903, 0.049947694, 0.053833954, 0.057481162, 0.060607564, 0.06254596, 0.06396148, 0.06412408, 0.06338968, 0.062260162, 0.062258173, 0.056205858]
stl_backdoor = [0.0041094394, 0.04446651, 0.049760915, 0.050954975, 0.05297455, 0.045329377, 0.049786825, 0.05856106, 0.056734826, 0.052033726, 0.05607724, 0.060358915, 0.06611269, 0.062393524, 0.056826334, 0.05435326, 0.04955297, 0.059481256, 0.0, 0.061568126, 0.059870515, 0.06312016, 0.062040355, 0.054728776, 0.05122718, 0.058318842, 0.057601493, 0.05107225, 0.051658224, 0.05406669, 0.058902938, 0.051588237, 0.05108544, 0.04055991, 0.031681843, 0.043811854, 0.0031433008]

    # normal_min = [-0.08219981, -0.09742379, -0.09012675, -0.09378171, -0.081212044, -0.07174587, -0.09439969, -0.09207225, -0.09204221, -0.08948231, -0.077739716, -0.09276223, -0.093206406, -0.08565307, -0.094806194, -0.094913244, -0.09514904, -0.08209634, 0.0, -0.09192872, -0.09325981, -0.09224725, -0.09240627, -0.08626962, -0.093331575, -0.09116769, -0.0911808, -0.084656954, -0.08919525, -0.08451319, -0.08890867, -0.08950758, -0.09028506, -0.09196973, -0.09238696, -0.09646034, -0.083339214]
    # normal_max = [0.14663148, 0.1466322, 0.1466322, 0.1466322, 0.1466322, 0.1466322, 0.14662409, 0.1466217, 0.14663148, 0.14662576, 0.14663124, 0.14661932, 0.1466322, 0.1466322, 0.1466217, 0.14660668, 0.1462717, 0.14628148, 0.0, 0.14470887, 0.14659405, 0.14657283, 0.1466186, 0.14662242, 0.146626, 0.1466291, 0.14662433, 0.14663029, 0.14662576, 0.14662457, 0.14663172, 0.146631, 0.14663196, 0.1466291, 0.14663076, 0.14662957, 0.146631]
    # normal_std = [0.05795682, 0.058861148, 0.05976945, 0.060610827, 0.060896225, 0.06119269, 0.06112532, 0.060709864, 0.06031482, 0.06035374, 0.0591824, 0.057665583, 0.05530601, 0.0520931, 0.04660034, 0.039296445, 0.030839793, 0.023762884, 0.0, 0.023175957, 0.030559096, 0.039495654, 0.0467018, 0.052156586, 0.055500444, 0.05746017, 0.059341874, 0.060064368, 0.060676005, 0.06142109, 0.061251156, 0.061146, 0.061321273, 0.060657106, 0.0600381, 0.059272356, 0.058730155]
    # normal_mean = [0.053977188, 0.060552765, 0.060600296, 0.061447315, 0.06306684, 0.06260245, 0.06107894, 0.058604494, 0.056307677, 0.05256787, 0.048401825, 0.04358665, 0.038314093, 0.0320158, 0.024111826, 0.016070625, 0.009738959, 0.0055102883, 0.0, 0.0056334254, 0.010037642, 0.016719913, 0.024570877, 0.03253327, 0.03998507, 0.04469171, 0.049728397, 0.05359328, 0.057227142, 0.060353324, 0.062284064, 0.06368631, 0.06385692, 0.06311405, 0.061986867, 0.061968517, 0.055945065]

    # backdoor_min = [-0.08139539, -0.07946706, -0.08283186, -0.081169605, -0.079481125, -0.07947016, -0.07942414, -0.07941961, -0.0794611, -0.08254862, -0.08277559, -0.08102155, -0.08282828, -0.07941675, -0.08102989, -0.0804503, -0.08287454, -0.083596945, 0.0, -0.08359814, -0.08330917, -0.0810318, -0.08044267, -0.079468966, -0.07897091, -0.07945371, -0.07947636, -0.07940769, -0.079447985, -0.07941413, -0.08570838, -0.09227657, -0.079333544, -0.07762098, -0.08259487, -0.08099699, -0.08139706]
    # backdoor_max = [0.14663076, 0.14662981, 0.14663053, 0.14663076, 0.14662981, 0.14662814, 0.14662933, 0.14663172, 0.14663124, 0.14663196, 0.146631, 0.14663243, 0.14663172, 0.14663148, 0.14663172, 0.14662981, 0.14663196, 0.1466322, 0.0, 0.1466322, 0.14663076, 0.14663148, 0.14663172, 0.14663196, 0.14663196, 0.14663053, 0.14663148, 0.146631, 0.146631, 0.14663148, 0.1466291, 0.14663053, 0.14663148, 0.14663172, 0.14663124, 0.146631, 0.14642859]
    # backdoor_std = [0.021608325, 0.059856985, 0.06115845, 0.061544795, 0.062211998, 0.05948145, 0.061943408, 0.06239435, 0.062957846, 0.062497802, 0.06410117, 0.065328665, 0.06487722, 0.06556994, 0.06598636, 0.065063596, 0.06429225, 0.06727735, 0.0, 0.068338715, 0.06692032, 0.0675828, 0.06538319, 0.063658416, 0.0636275, 0.064215854, 0.06325084, 0.061361063, 0.061536502, 0.06264032, 0.06263648, 0.06140544, 0.062311053, 0.058099255, 0.053929072, 0.059671782, 0.01999891]
    # backdoor_mean = [0.0040964233, 0.044295397, 0.049564544, 0.050763622, 0.05277945, 0.045149464, 0.04961087, 0.058341216, 0.05653486, 0.051864285, 0.055916116, 0.060193237, 0.06592897, 0.062233254, 0.056709148, 0.054232273, 0.049453113, 0.059382472, 0.0, 0.06147947, 0.05975797, 0.06300451, 0.06188511, 0.054569367, 0.05109102, 0.05814679, 0.05741423, 0.050893936, 0.05148001, 0.05388084, 0.058688376, 0.051391996, 0.05090882, 0.04040733, 0.031562682, 0.043645028, 0.0031375492]

# kkk = np.arange(-90, 95, 5)[np.argmax(np.array(backdoor_mean)-np.array(normal_mean))]
# nnn = np.arange(-90, 95, 5)[np.argmax(backdoor_mean)]


# print(backdoor_mean[19])
# print(normal_mean[19])
# print(backdoor_mean[19] - normal_mean[19])

# print(backdoor_std[19])
# print(normal_std[19])
# print(backdoor_std[19] - normal_std[19])


# # print(np.array(normal)[np.argmax(np.array(backdoor)-np.array(normal))])
# # print(np.array(backdoor)[np.argmax(np.array(backdoor)-np.array(normal))])

# # print(np.array(backdoor)[np.argmax(np.array(backdoor)-np.array(normal))] - np.array(normal)[np.argmax(np.array(backdoor)-np.array(normal))])

# print(kkk)
# print(nnn)

# exit()
x_plot = np.arange(-90, 95, 5)
plt.figure(figsize=(8, 3.5),dpi=200)

plt.plot(x_plot, stl_normal, linestyle='solid', marker='s', label="normal")
plt.plot(x_plot, stl_backdoor, linestyle='dotted', marker='^', label="backdoor")

# plt.plot(x_plot, stl_normal, linestyle='dotted', marker='^', label="normal")
# plt.plot(x_plot, stl_backdoor, linestyle='dotted', marker='^', label="backdoor")


plt.xticks(np.arange(-90, 95, 10), fontsize=7)
plt.ylim([0, 0.1])
plt.xlabel('angle')
plt.ylabel('confidence')

plt.legend(loc='upper right', ncol=4)
plt.show()
plt.savefig(f'./야옹야옹 해2.png')